<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" charset="utf-8" src="jquery.js"></script> 
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Classes and Components</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAAAABMLAAATCwAAAAEAAAAAAAD///4AaK1OAFdqRACgoJIAm8ltAGrRmQAzghYANdetAC3PigCWypcAydLJAEySLgApxWQALqtiAHeEagBUwWcAK72OAOTkxABUsooA0OTNAIo8OwAb+MkA5+3iAMPGpgA6ti4ApNTAAPT29QBo6tMA3t7dACjWmwAj3asAGOmrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGgkNEAcHHQgMDBgGAhwAABYNEAcHHQgMDQ0GBgIDGgAKDRAHHQwNCwsGBgYGDgoACRAHCA8BCwsLCwYGBgIDGgkQEgEBAQEBAQELCwsCDhwJEBIPDwQJCQkJBAEYBg4cCRAHBwgHBQUFBQ8PGAsOCgoQBwICHh8dCAgMCwILDhwWEAcUFBIVHR0IDAIUCwMaGhkIAxQSFR4dDA8DDgsKAAAaBQUZGxUHHQwYBA4XAAAAABMFCAcdCAwYGAEKGgAAAAAAEw8NDQ8PCwMcAAAAAAAAABYEBAQEBAMaAAAAAAAAAAAAEQQEBAMcAAAAAAAAAAAAAAARFxccAAAAAAAAAAAAAp4AAAACAAD//wAAAAQAAACgAAADuQAAASwAAAACAAD//wAAAF0AAP8PAAAAAgAA/fAAAHAwAAAAAAAAABQ=" type="image/x-icon" />
<script type="text/javascript" charset="utf-8" src="jquery.js"></script> 
<script type="text/javascript" charset="utf-8">
$(function() {
	var nav1 = $('#navrow1');
	var nav2 = $('#navrow2');
	var header = [
];
	if(!$('[href="pages.html"]').parent().hasClass('current')) {
		return;
	}
	var lis = $.map(header, function(head) {
		return '<li><a href="'+head[0]+'"><span>'+head[0]+'</span></a></li>';
	}).join('');
	var ul = $('<ul style="width:100%;"></ul>').attr({class: 'tablist'}).html(lis);
	var div = $('<div></div>').attr({id: 'navrow2', class: 'tabs2'}).append(ul);
	div.insertAfter(nav1);
});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Icon-72.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Big Fish iOS SDK
   &#160;<span id="projectnumber">4.9</span>
   </div>
   <div id="projectbrief">Enable your iOS games with Big Fish components</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.4 (BFG Build 3) -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="_freemium.html"><span>Freemium&#160;Games</span></a></li>
      <li><a href="_f2_p.html"><span>Free-to-Play&#160;Games</span></a></li>
      <li class="current"><a href="reference_overview.html"><span>Technical&#160;References</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="_f_a_q.html"><span>FAQ</span></a></li>
      <li><a href="_whatsnew.html"><span>Release&#160;Notes</span></a></li>
      <li><a href="pages.html"><span>Document&#160;Index</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="reference_overview.html"><span>Overview</span></a></li>
      <li><a href="standards.html"><span>Tools&#160;and&#160;Standards</span></a></li>
      <li><a href="reference_gamespecific.html"><span>Game&#160;Specific&#160;Resources</span></a></li>
      <li><a href="reference_sdk_feature_configurability.html"><span>Feature&#160;Configuration&#160;Matrix</span></a></li>
      <li class="current"><a href="reference_class.html"><span>Classes&#160;and&#160;Components</span></a></li>
      <li><a href="iap_dummy_app_test.html"><span>Testing&#160;In-App&#160;Purchases</span></a></li>
      <li><a href="_d_e_b_u_g.html"><span>Debugging</span></a></li>
      <li><a href="qa_testing.html"><span>QA&#160;Testing</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Classes and Components </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#bigFishComponents">Creating Game Components with Big Fish Classes</a></li>
<li class="level1"><a href="#bfgManager_components">bfgManager Components</a><ul><li class="level2"><a href="#gdn_bfgManager">bfgManager and the Game Discovery Network</a></li>
<li class="level2"><a href="#more_games_bfgManager">More Games - bfgManager showMoreGames</a></li>
<li class="level2"><a href="#tellafriend_bfgManager">Tell A Friend - bfgManager showTellAFriend</a></li>
<li class="level2"><a href="#ads_bfgManager">Ads - bfgManager startAds/stopAds and bfgAdsController</a></li>
<li class="level2"><a href="#branding_bfgManager">Branding - bfgManager startBranding/stopBranding</a></li>
<li class="level2"><a href="#browser_bfgManager">Launching an in-game browser with bfgManager</a></li>
<li class="level2"><a href="#rc_COPPA">COPPA child-directed settings</a></li>
<li class="level2"><a href="#rc_options_submenu_bfgManager">bfgManager and the Options sub-menu</a></li>
<li class="level2"><a href="#track_users_bfgManager">Tracking user IDs with bfgManager</a></li>
</ul>
</li>
<li class="level1"><a href="#rc_bfgLogin">Big Fish Login</a><ul><li class="level2"><a href="#bfgLoginImplementation">Implementing Big Fish Login</a></li>
</ul>
</li>
<li class="level1"><a href="#rc_iSplash">iSplash! Newsletter - bfgSplash</a></li>
<li class="level1"><a href="#rc_bfgRating">Rating - bfgRating</a></li>
<li class="level1"><a href="#bfgEventReporting">Game Event Reporting - bfgGameReporting</a><ul><li class="level2"><a href="#strategyGuideOverlayReporting">Strategy Guide Overlay Reporting</a></li>
</ul>
</li>
<li class="level1"><a href="#placementContent">Supporting Placements</a><ul><li class="level2"><a href="#placementDefaultPlacements">Default placements</a></li>
<li class="level2"><a href="#placementsCustomPlacements">Custom placements</a></li>
<li class="level2"><a href="#placementNotifications">Notifications</a><ul><li class="level3"><a href="#placementWebview">Webviews</a></li>
<li class="level3"><a href="#placementRewards">Rewards</a></li>
<li class="level3"><a href="#placementIAPvirtualGoods">In-App Purchasing via Virtual Goods</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#rgs_integratePush">Integrating PlayHaven push notifications</a><ul><li class="level2"><a href="#rgs_integratePushDelegates">bfgPushNotificationManager and the bfgPushNotificationManager class</a></li>
<li class="level2"><a href="#rgs_testPushNotifications">Testing push notifications</a><ul><li class="level3"><a href="#rgs_enablePush">Enabling push notifications</a></li>
<li class="level3"><a href="#rgs_pushInstallProfile">Installing the provisioning profile</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#iapSupport">In-App Purchase Support - bfgPurchase</a></li>
<li class="level1"><a href="#utilitiesSupportClasses">Utilities and Support Classes</a><ul><li class="level2"><a href="#bfgProfileManager">bfgProfileManager</a></li>
<li class="level2"><a href="#bfgSettings">bfgSettings</a></li>
<li class="level2"><a href="#bfgStrings">bfgStrings</a></li>
</ul>
</li>
<li class="level1"><a href="#AppManStrategyGuides">The Big Fish Game App, Strategy Guides, and bfgAppManager</a><ul><li class="level2"><a href="#AMSGInstalled">isBigFishGamesAppInstalled</a></li>
<li class="level2"><a href="#AMSGlaunchStoreWithApp">launchStoreWithApp</a></li>
<li class="level2"><a href="#AMSGlaunchWrappingID">launchBigFishGamesAppStrategyGuideWithWrappingID</a></li>
<li class="level2"><a href="#strategyGuide_bfgManager">Calling a strategy guide with bfgManager</a></li>
<li class="level2"><a href="#AMSGreferralUrl">Strategy guides and customer referral URLs</a></li>
<li class="level2"><a href="#bfgAppStraGuidesReporting">Strategy Guide Reporting</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Overview of classes and related tasks that enable Big Fish components in games.</p>
<h1><a class="anchor" id="bigFishComponents"></a>
Creating Game Components with Big Fish Classes</h1>
<p>You will perform additional development tasks to implement the following major Big Fish components.</p>
<p>The classes in the Big Fish iOS SDK include both classes for the major Big Fish components, and utility and support classes that support the major components or facilitate development.</p>
<dl class="section note"><dt>Note</dt><dd>For information on push notifications, see <a class="el" href="reference_gamespecific.html#rgs_pushNotifications">PlayHaven Push Notifications</a>.</dd></dl>
<h1><a class="anchor" id="bfgManager_components"></a>
bfgManager Components</h1>
<h2><a class="anchor" id="gdn_bfgManager"></a>
bfgManager and the Game Discovery Network</h2>
<p>The Game Discovery Network (GDN) is the promotional dashboard that loads before a game begins. The <a class="el" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> class is used to manage the GDN, but it encompasses more functionality than just the GDN. For more information, see the <a href="interfacebfg_manager.html" class="el" target="_self">bfgManager Class Reference</a>.</p>
<p>For Freemium games, the initial display for the dashboard includes a <b>Play Now</b> button. After a user pauses the game, the dashboard enters a resume mode. This mode provides buttons to resume the game and to link back to the Main Menu for the game. Paid versions of games use only the resume mode.</p>
<p>The resume mode includes a link back to the Main Menu. Developers must add the code to navigate to the Main Menu after the GDN sends the Main Menu notification <b>BFGPROMODASHBOARD_NOTIFICATION_MAINMENU</b>.</p>
<p><b>Notification Sent</b></p>
<ul>
<li>BFGPROMODASHBOARD_NOTIFICATION_COLDSTART - Sent after GDN play button is selected. Typically triggers game to run branding.</li>
<li>BFGPROMODASHBOARD_NOTIFICATION_WARMSTART - Sent after GDN resume button is selected.</li>
<li>BFGPROMODASHBOARD_NOTIFICATION_MAINMENU - Sent after GDN Main Menu button is selected. <br/>
 <br/>
</li>
</ul>
<h2><a class="anchor" id="more_games_bfgManager"></a>
More Games - bfgManager showMoreGames</h2>
<p>The framework includes the [<a href="interfacebfg_manager.html#a0f7b15d1862eaca88de68a9f48a6d8a8" class="el">bfgManager showMoreGames</a>] API for the More Games UI. This feature is triggered from a button on the Main Menu. You add the <b>More Games</b> button and call the <a class="el" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> code when a user taps the button.</p>
<p>Depending on the type of game you are developing, for implementation best practices see the Freemium <a class="el" href="main_menu.html#mm_more_games">More Games button</a> section, or the Free-to-Play <a class="el" href="f2p_main_menu.html#f2p_more_games">More Games button</a> section.</p>
<p><b>Notification Sent</b></p>
<ul>
<li>BFGPROMODASHBOARD_NOTIFICATION_MOREGAMES_CLOSED - Sent when the More Games UI has closed. <br/>
 <br/>
</li>
</ul>
<h2><a class="anchor" id="tellafriend_bfgManager"></a>
Tell A Friend - bfgManager showTellAFriend</h2>
<p>The framework includes the [<a href="interfacebfg_manager.html#abc88f8458fff6d3934f4bd6ec9b0c11c" class="el">bfgManager showTellAFriend</a>] API for the Tell A Friend e-mail UI. This feature is typically triggered from a button on the Options sub-menu.</p>
<ul>
<li>You add the <b>Tell A Friend</b> button if [<a href="interfacebfg_manager.html#a3fd48676ed5f795ed26a0ff856e4ec79" class="el">bfgManager canShowTellAFriendButton</a>] returns <b>YES</b>.</li>
</ul>
<p>For more information on implementation in the Options sub-menu of the Main Menu, see <a class="el" href="main_menu.html#mm_tell_a_friend">Tell A Friend button</a>.</p>
<p><b>Notification Sent</b></p>
<ul>
<li>BFG_NOTIFICATION_TELLAFRIEND_MAILCOMPLETED - Sent when the Mail UI is removed. <br/>
 <br/>
</li>
</ul>
<h2><a class="anchor" id="ads_bfgManager"></a>
Ads - bfgManager startAds/stopAds and bfgAdsController</h2>
<p>The [<a href="interfacebfg_manager.html#a27b8f441980c2ad13de2bb20d6746903" class="el">bfgManager startAds</a>] and [<a href="interfacebfg_manager.html#a12b90710348a0f4fe2284b5c372433d8" class="el">bfgManager stopsAds</a>] APIs are the recommended methods to control the display of ads.</p>
<ul>
<li>[<a href="interfacebfg_manager.html#a27b8f441980c2ad13de2bb20d6746903" class="el">bfgManager startAds:bfgadsOrigin</a>] starts ads displaying in the parent view.</li>
</ul>
<p><b>Notification Sent</b></p>
<ul>
<li>No notifications sent.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>When you build this component, ask your producer to provide the .zip file that contains the current ad bundle (<b>bfgads_bundlepackage.zip</b>).</dd></dl>
<p><b>To disable Big Fish ads and iAds:</b></p>
<p>At your producer's request, you might need to disable ads during development.</p>
<ul>
<li>In the <b>bfglib_gamespecific_resources</b> directory, in the <b>bfg_default_settings.json</b> file, remove <b>"bfg"</b> and <b>"apple"</b> respectively from the <b>allowed_ad_types</b> parameter.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This is also configurable via the Big Fish Mobile Admin tool, so the changes made here may be overwritten when the startup service is contacted.</dd></dl>
<h2><a class="anchor" id="branding_bfgManager"></a>
Branding - bfgManager startBranding/stopBranding</h2>
<p>The [<a href="interfacebfg_manager.html#a6e309ead7e0ba7da61eaec44dbed0577" class="el">bfgManager startBranding</a>] and [<a href="interfacebfg_manager.html#a33a1371d0041d6cdcbd23387b2977897" class="el">bfgManager stopBranding</a>] APIs are the recommended methods to start and stop branding.</p>
<ul>
<li>[<a href="interfacebfg_manager.html#a6e309ead7e0ba7da61eaec44dbed0577" class="el">bfgManager startBranding</a>] starts the branding animation.</li>
</ul>
<p>The game-specific resources folder contains Big Fish assets. You add your own assets to this folder.</p>
<p><b>Notification Sent</b></p>
<ul>
<li>BFGBRANDING_NOTIFICATION_COMPLETED - Sent when the branding is complete. <br/>
 <br/>
</li>
</ul>
<h2><a class="anchor" id="browser_bfgManager"></a>
Launching an in-game browser with bfgManager</h2>
<p>Developers can open any URL in an in-game browser by calling the following APIs:</p>
<ul>
<li>To launch the in-game browser: <div class="fragment"><div class="line">[<a class="code" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> showWebBrowser:(NSString *)startPage];</div>
</div><!-- fragment --></li>
<li>To close the in-game browser: <div class="fragment"><div class="line">[<a class="code" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> removeWebBrowser];</div>
</div><!-- fragment --> <br/>
 <br/>
</li>
</ul>
<h2><a class="anchor" id="rc_COPPA"></a>
COPPA child-directed settings</h2>
<p>Call [<a href="interfacebfg_manager.html#a07d6862c221b7fee5381425f653019be" class="el">bfgManager setCoppaOptOut</a>] to indicate the user is under 13-years-old. By default, this parameter is set to NO, indicating the user is over 13.</p>
<h2><a class="anchor" id="rc_options_submenu_bfgManager"></a>
bfgManager and the Options sub-menu</h2>
<p>The following <a class="el" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> APIs are called from the Options sub-menu on Freemium games:</p>
<ul>
<li>[<a href="interfacebfg_manager.html#a36dc0bd019902e9cf816c926e66bf8f0" class="el">bfgManager showSupport</a>] opens the Support page from the Support button.</li>
<li>[<a href="interfacebfg_manager.html#ace61025e839f1298ebc3c78307dd3791" class="el">bfgManager showPrivacy</a>] opens the Privacy policy page.</li>
<li>[<a href="interfacebfg_manager.html#a8e7c1a2dab58d6921c67cef2fdb6b130" class="el">bfgManagers howTerms</a>] opens the Terms of Use page.</li>
</ul>
<p>For more information on these features, see <a class="el" href="main_menu.html#mm_options">Options sub-menu</a>.</p>
<p><b>Notification Sent</b></p>
<ul>
<li>No notifications sent. <br/>
 <br/>
</li>
</ul>
<h2><a class="anchor" id="track_users_bfgManager"></a>
Tracking user IDs with bfgManager</h2>
<p>Use the following APIs to track users.</p>
<ul>
<li>[<a href="interfacebfg_manager.html#ada66578de1a51d32f91ef4388f8019f7" class="el">bfgManager setUserID:(int)userID</a>] uniquely identifies the user.</li>
<li>[<a href="interfacebfg_manager.html#a87d756546f4cdccff8b7b03a26b1db90" class="el">bfgManager userID</a>] queries the current User ID. That User ID will be tracked with all service calls. <br/>
 <br/>
</li>
</ul>
<h1><a class="anchor" id="rc_bfgLogin"></a>
Big Fish Login</h1>
<p>Big Fish Login is an interface that lets users sign in to their Big Fish accounts inside a Big Fish app.</p>
<ul>
<li>A logged-in user has a unique identifier and a nickname.</li>
<li>If the user does not have an account with Big Fish, they can create one with this interface.</li>
<li>The user can also request a password change.</li>
<li>The unique identifier obtained by login is the hashed master identifier (HMID).</li>
</ul>
<h2><a class="anchor" id="bfgLoginImplementation"></a>
Implementing Big Fish Login</h2>
<ol type="1">
<li>Once your app loads and has initialized <a class="el" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a>, you will need to call [<a href="interfacebfg_login_controller.html#aaae4502e24a68c83911063bfca11cc2f" class="el">bfgLoginController startService</a>]. This will present a "Welcome back" message to the user if the user is logged in. A good choice might be to call this as the user reaches the Main Menu.</li>
<li>Your Big Fish Producer will have input on where a <b>Sign In/Sign Out</b> button will go. Call [<a href="interfacebfg_login_controller.html#a5ea88a700c4b6280c35f1b60b1f68a88" class="el">bfgLoginController isLoggedIn</a>] to determine whether to show <b>Sign In</b> or <b>Sign Out</b>.<ul>
<li>You can get a fully formed UIButton from the SDK or build your own button out of images also provided by the SDK via the <a class="el" href="interfacebfg_login_controller.html" title="Manages BigFish Login. ">bfgLoginController</a> APIs.</li>
<li>You are responsible for adding the Sign In button to your view hierarchy.</li>
</ul>
</li>
<li>When the user taps <b>Sign In</b>, the screen will darken and a login view will float in from the bottom of the screen.</li>
<li>When the login view is dismissed, a <b>BFG_NOTIFICATION_LOGIN_CLOSED</b> notification will be posted.</li>
<li>You will also be notified when the user's login status changes via a notification called <b>BFG_NOTIFICATION_LOGIN_STATUS_CHANGE</b>. A user's status changes when they successfully sign in, successfully sign up, sign out, or on re-entering the app in a different state from when it was exited. For example, a user might sign out in a different app, then re-enter yours. You will receive a notification that this occurred.<ul>
<li>The <b>BFG_NOTIFICATION_LOGIN_STATUS_CHANGE</b> notification contains additional information in its <b>userInfo</b> field. It has two keys: <b>BFG_LOGIN_STATUS_CHANGE_KEY_ACTIVE_HMID</b> and <b>BFG_LOGIN_STATUS_CHANGE_KEY_PREVIOUS_HMID</b>. This might be useful if your game has just become active but a different user has signed in than had been playing when the app was put into the background. You will get the previous player's HMID allowing you to perhaps save some information about them.</li>
<li>When the login status changes, be sure to update your <b>Sign In/Sign Out</b> buttons. Only show <b>Sign In</b> when the user is signed out, and vice versa.</li>
</ul>
</li>
<li>A UI is not associated with the log out action. The user is simply logged out and the status change notification is posted.</li>
</ol>
<p><b>Notification Sent</b></p>
<ul>
<li>BFG_NOTIFICATION_LOGIN_STATUS_CHANGE - The login status for the user has changed. This notification contains the following keys in the userInfo dictionary:<ul>
<li>BFG_LOGIN_STATUS_CHANGE_KEY_ACTIVE_HMID</li>
<li>BFG_LOGIN_STATUS_CHANGE_KEY_PREVIOUS_HMID</li>
</ul>
</li>
<li>BFG_NOTIFICATION_LOGIN_CLOSED - The login view has been dismissed.</li>
</ul>
<p><br/>
 <br/>
</p>
<h1><a class="anchor" id="rc_iSplash"></a>
iSplash! Newsletter - bfgSplash</h1>
<p>The iSplash! newsletter promotes Freemium games by e-mail. It provides new game offers to users who subscribe. Until a user subscribes to a newsletter, an <b>iSplash! Newsletter</b> button displays encouraging users to subscribe. After they subscribe, the button no longer appears.</p>
<p><b>To implement the iSplash! Newsletter button:</b></p>
<ol type="1">
<li>Get the menu button images with [<a href="interfacebfg_splash.html#ab7774b060090a63d6476c18ec7a69bbd" class="el">bfgSplash splashMenuImageNormal</a>] and [<a href="interfacebfg_splash.html#a60470100ae8df10958edb8fdc2c35623" class="el">bfgSplash splashMenuImageHighlighted</a>]. Alternatively, a fully functional UIButton that is configured to send the email and hide itself is available via [<a class="el" href="interfacebfg_splash.html" title="API for iSplash newsletter functionality. ">bfgSplash</a> <b>createSplashButton</b>].</li>
<li>Set the display of the button based on the current status of the newsletter subscription according to the value returned by the [<a class="el" href="interfacebfg_splash.html" title="API for iSplash newsletter functionality. ">bfgSplash</a> <b>getNewsletterSent</b>] API.<ul>
<li>If the subscription mail has not been sent, display the button on the Main Menu.</li>
<li>If the subscription mail has been sent, remove the button from the Main Menu.</li>
</ul>
</li>
<li>Tapping the button calls the iSplash code (the <a class="el" href="interfacebfg_splash.html" title="API for iSplash newsletter functionality. ">bfgSplash</a> class). The <a class="el" href="interfacebfg_splash.html" title="API for iSplash newsletter functionality. ">bfgSplash</a> code opens an e-mail that the user can send to begin the subscription.</li>
<li>When the user successfully sends the subscription e-mail, the local setting for the iSplash! newsletter subscription updates immediately and the Main Menu UI should refresh based on the new results of [<a href="interfacebfg_splash.html#a451b6973709df6658d34147ea6d8f02a" class="el">bfgSplash getNewsletterSent</a>]. The button will no longer appear.</li>
<li>On each resume of the application, the <a class="el" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> checks the current iSplash! subscription status from the Big Fish startup service and sets the newsletter setting accordingly.</li>
</ol>
<p>For more information, see <a class="el" href="main_menu.html#mm_isplash">iSplash! Newsletter button</a>. <br/>
 <br/>
</p>
<h1><a class="anchor" id="rc_bfgRating"></a>
Rating - bfgRating</h1>
<p>The <a class="el" href="interfacebfg_rating.html" title="Enables users to rate games. ">bfgRating</a> classes enable users to rate games. For information about changes to this class, see the version release notes at <a class="el" href="_whatsnew.html">What's new in this release</a>.</p>
<p><b>To implement rating for your game:</b></p>
<ol type="1">
<li>For a generic game rating notification, use the rating keys in <b>bfg_default_settings.json</b> file copied from the <b>bfglib_gamespecific_resources</b> folder.</li>
<li>Define significant events based on the completion of levels, scenes, or mini-games in your game by calling [<a href="interfacebfg_rating.html#a83a85f5cf8931ad1c47fbc8ad2e1af42" class="el">bfgRating userDidSignificantEvent:true</a>].</li>
<li>Set the <b>rating_significant_events_until_prompt</b> parameter in <b>bfg_default_settings.json</b> to the number of significant events that must be triggered before the game displays the in-game ratings prompt.</li>
<li>In <b>bfg_default_settings.json</b>, set values for the <b>rating_days_until_prompt</b> and <b>rating_uses_until</b> prompt parameters. The ratings prompt appears after the set number of days or game uses regardless of the progress within the game. Prompts based on these parameters will not display in active games until the user returns to the Main Menu, or the user removes the game from the multi-tasking tray.</li>
<li>Set the <b>rating_days_before_reminding</b> parameter in <b>bfg_default_settings.json</b> to <b>1</b>. This ensures that the prompt reappears the next time the user plays the game.</li>
<li>For Freemium games, display the ratings prompt at the end of the last level, scene, or mini-game before the trial ends and you display an upsell message.</li>
<li>For full (paid) games, display the initial ratings prompt after 25% of the game’s significant events have been triggered, or 20 to 30 minutes have elapsed, whichever comes first. <br/>
 <br/>
</li>
</ol>
<h1><a class="anchor" id="bfgEventReporting"></a>
Game Event Reporting - bfgGameReporting</h1>
<p>All games <em>must</em> send information to a Big Fish reporting site for analytics. Big Fish currently uses a combination of its own service, HasOffers, Kontagent, PlayHaven, and Flurry Analytics for reporting and analytics.</p>
<ul>
<li>Use the <a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> class in the Big Fish iOS SDK to implement reporting your game events.</li>
<li>Use this class to set custom Kontagent events and PlayHaven placements instead of calling those APIs directly.</li>
<li>Flurry, PlayHaven, and Kontagent are included in the Big Fish iOS SDK. You do not need to include those libraries in your project.</li>
<li>If you are asked to report events that are not included in this list, you should use <a class="el" href="interfacebfg_reporting.html" title="To report events or errors to remote reporting service. ">bfgReporting</a> to do so.</li>
</ul>
<p>Games must support all the events methods defined in <a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a>.</p>
<ul>
<li>[<a href="interfacebfg_game_reporting.html#a6fbe1f33a80fcca1b27aa8a82b1d1f94" class="el">bfgGameReporting logMainMenuShown</a>]; Game should call this method each time the Main Menu is shown.</li>
<li>[<a href="interfacebfg_game_reporting.html#a05ab17f7e19a3031e54db37439506e2f" class="el">bfgGameReporting logRateMainMenuCanceled</a>]; Game should call this each time the user cancels from Main Menu Rating Screen.</li>
<li>[<a href="interfacebfg_game_reporting.html#afc04be2c8fccb67bfa7a3bb36b2711d4" class="el">bfgGameReporting logOptionsShown</a>]; Game should call this each time the Options sub-menu is shown.</li>
<li>[<a href="interfacebfg_game_reporting.html#ab5e683d7f4a61b21b465084cb1b82392" class="el">bfgGameReporting logPurchaseMainMenuShown</a>]; Game should call this each time purchase from the Main Menu is shown.</li>
<li>[<a href="interfacebfg_game_reporting.html#a0110a767ca1efd9dbee1f9dfe6b49641" class="el">bfgGameReporting logPurchaseMainMenuClosed</a>]; Game should call this each time purchase from the Main Menu is closed.</li>
<li>[<a href="interfacebfg_game_reporting.html#a230c774ad064f88ab211039759a27159" class="el">bfgGameReporting logPurchasePayWallShown:(NSString *) paywallID</a>]; Game should call this each time a non-Main Menu purchase Buy Wall is shown with an identifier for the Buy Wall.</li>
<li>[<a href="interfacebfg_game_reporting.html#a883586e45a942f9843d5ccd3fc5169de" class="el">bfgGameReporting logPurchasePayWallClosed:(NSString *) paywallID</a>]; Game should call this each time a non-Main Menu purchase Buy Wall is closed with an identifier for the Buy Wall.</li>
<li>[<a href="interfacebfg_game_reporting.html#ad9f20fb1cb1f81debc5ada77a87360cb" class="el">bfgGameReporting logLevelStart:(NSString *)levelID</a>]; Game should call this each time a level has started with an identifier for the level.</li>
<li>[<a href="interfacebfg_game_reporting.html#ae56e544847f330ce2329ad1d5c2cdbf2" class="el">bfgGameReporting logLevelFinished:(NSString *)levelID</a>]; Game should call this each time a level is finished with an identifier for the level.</li>
<li>[<a href="interfacebfg_game_reporting.html#a5f0b5eac1277973bd6a502b3c80763d4" class="el">bfgGameReporting logMiniGameStart:(NSString *)miniGameID</a>]; Game should call this each time a mini game is started with an identifier for the mini game.</li>
<li>[<a href="interfacebfg_game_reporting.html#a2d5b6ea5a84193430db0d60894c360eb" class="el">bfgGameReporting logMiniGameSkipped:(NSString *)miniGameID</a>]; Game should call this each time a mini game is skipped with an identifier for the mini game.</li>
<li>[<a href="interfacebfg_game_reporting.html#aa1c686c462679f037535d932dd6b9919" class="el">bfgGameReporting logMiniGameFinished:(NSString *)miniGameID</a>]; Game should call this each time a mini game is finished with an identifier for the mini game.</li>
<li>[<a href="interfacebfg_game_reporting.html#ab2feab1bf3547248fc8fc5b51b122bfd" class="el">bfgGameReporting logAchievementEarned:(NSString *)achievementID</a>]; Game should call this each time an achievement is earned with an identifier for the achievement.</li>
<li>[<a href="interfacebfg_game_reporting.html#a3f60c19874e687d004f12548990b28e7" class="el">bfgGameReporting logGameCompleted</a>]; Game should call this when the game is completed.</li>
<li>[<a href="interfacebfg_game_reporting.html#a7a745de19501275942c629e0b948f336" class="el">bfgGameReporting logGameHintRequested</a>]; Game should call this each time a game is requested.</li>
<li>[<a href="interfacebfg_game_reporting.html#aaaee174e6995f28f400854e854c17273" class="el">bfgGameReporting logCustomEvent</a>]; Game should call this if they have been asked to log custom events.</li>
<li>[<a href="interfacebfg_game_reporting.html#a9460bd17a6dab4b440623ed3f3133610" class="el">bfgGameReporting logCustomPlacement</a>]; Game should call this if they have been asked to log custom placements.</li>
<li>[<a href="interfacebfg_game_reporting.html#a0ad1ba40491aa66de49db172b2be6f1c" class="el">bfgGameReporting preloadCustomPlacement</a>]; Game should call this if they need to pre-load the content of their custom placements because they have seen performance issues.</li>
</ul>
<h2><a class="anchor" id="strategyGuideOverlayReporting"></a>
Strategy Guide Overlay Reporting</h2>
<p>When the strategy guide overlay is shown, call [<a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> <b>logPurchasePayWallShown:@"guide"</b>];</p>
<p>When the strategy guide overlay is closed, call [<a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> <b>logPurchasePayWallClosed:@"guide"</b>];</p>
<dl class="section note"><dt>Note</dt><dd>The strategy guide overlay replaces the paywall that would normally be shown if the guide was accessed prior to purchase, since this feature is no longer a part of the CE unlock.</dd></dl>
<h1><a class="anchor" id="placementContent"></a>
Supporting Placements</h1>
<p>If your game supports placements via PlayHaven, your producer will set up the PlayHaven token and secret via the Big Fish Mobile Admin tool.</p>
<p>To support placements correctly, you will also need to define a custom URL scheme and forward it to the Big Fish application.</p>
<div class="fragment"><div class="line">-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Check if this is an SDK supported URL scheme </span></div>
<div class="line">    <span class="keywordflow">if</span> (![<a class="code" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> launchSDKByURLScheme:url.absoluteString])</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Do you own thing...</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> YES;</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>If you are developing a Freemium game, for more information see <a class="el" href="production.html#Xcode_requirements">Xcode requirements</a> under <a class="el" href="production.html">Freemium Production Requirements</a>.</li>
<li>If you are developing a Free-to-Play game, for more information see <a class="el" href="f2p_production.html#f2p_Xcode_requirements">Xcode requirements</a> under <a class="el" href="f2p_production.html">Free-to-Play Production Requirements</a>.</li>
</ul>
<h2><a class="anchor" id="placementDefaultPlacements"></a>
Default placements</h2>
<p>Ensure that certain methods of the SDK are correctly initialized so that the default PlayHaven placements will be triggered.</p>
<table class="doxtable">
<tr>
<th>PlayHaven Placement </th><th>Method Call to Trigger This Placement </th><th>Description  </th></tr>
<tr>
<td>achievement_earned </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logAchievementEarned </td><td>An achievement has been earned. </td></tr>
<tr>
<td>end_paywall_closed </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logPurchasePayWallClosed </td><td>Paywall close event as a result of the user reaching the end of the free trial period. </td></tr>
<tr>
<td>end_paywall_opened </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logPurchasePayWallShown </td><td>Paywall open event as a result of the user reaching the end of the free trial period. </td></tr>
<tr>
<td>game_completed </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logGameCompleted </td><td>The full game, not including bonus chapter(s), has been completed. </td></tr>
<tr>
<td>game_hint </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logGameHintRequested </td><td>A game hint was requested. </td></tr>
<tr>
<td>game_launched </td><td>NONE </td><td>Initial launch of game. </td></tr>
<tr>
<td>game_resumed </td><td>NONE </td><td>Game has resumed. </td></tr>
<tr>
<td>level_finished </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logLevelFinished </td><td>Level finished. </td></tr>
<tr>
<td>level_started </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logLevelStart </td><td>Level started. </td></tr>
<tr>
<td>mainmenu_paywall_closed </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logPurchaseMainMenuClosed </td><td>Paywall closed event as a result of clicking on the Unlock Now button on the Main Menu. </td></tr>
<tr>
<td>mainmenu_paywall_opened </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logPurchaseMainMenuShown </td><td>Paywall opened event as a result of clicking on the Unlock Now button on the Main Menu. </td></tr>
<tr>
<td>mainmenu_shown </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logMainMenuShown </td><td>Main Menu shown. </td></tr>
<tr>
<td>minigame_finished </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logMiniGameFinished </td><td>Mini game was finished. </td></tr>
<tr>
<td>minigame_skipped </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logMiniGameSkipped </td><td>Mini game was skipped. </td></tr>
<tr>
<td>minigame_started </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logMiniGameStart </td><td>Mini game was started. </td></tr>
<tr>
<td>moregames_closed </td><td><a class="el" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> removeMoreGames </td><td>BFG SDK Moregames UI was closed. </td></tr>
<tr>
<td>moregames_opened </td><td><a class="el" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> showMoreGames </td><td>BFG SDK Moregames UI was opened. </td></tr>
<tr>
<td>options_shown </td><td><a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logOptionsShown </td><td>Options was shown. </td></tr>
<tr>
<td>rate_game </td><td><a class="el" href="interfacebfg_rating.html" title="Enables users to rate games. ">bfgRating</a> immediateTrigger </td><td>The game is about to be rated. </td></tr>
</table>
<h2><a class="anchor" id="placementsCustomPlacements"></a>
Custom placements</h2>
<p>If custom placements are needed (Free-to-Play games only) then the [<a href="interfacebfg_game_reporting.html#a9460bd17a6dab4b440623ed3f3133610" class="el">bfgGameReporting logCustomPlacement</a>] method can be used. Contact your Big Fish Producer if you have any questions about custom placements.</p>
<h2><a class="anchor" id="placementNotifications"></a>
Notifications</h2>
<p>Once your game's settings are configured correctly, your application will receive notification if placements in your game trigger webviews to be displayed. These webviews can display when you call <a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> to log events or at other SDK tracked moments in your game, such as launch, resume, etc.</p>
<h3><a class="anchor" id="placementWebview"></a>
Webviews</h3>
<p>As webviews are displayed, you will receive the following notifications:</p>
<ul>
<li>BFG_NOTIFICATION_PLACEMENT_CONTENT_OPENED - A webview has been opened.</li>
<li>BFG_NOTIFICATION_PLACEMENT_CONTENT_CLOSED- A webview has been closed.</li>
<li>BFG_NOTIFICATION_PLACEMENT_CONTENT_ERROR - A webview experienced an error.</li>
</ul>
<p>These notifications contain the following keys in the userInfo dictionary:</p>
<ul>
<li>BFG_PLACEMENT_CONTENT_NAME_KEY = "contentName" - Name of the webview displayed.</li>
<li>BFG_PLACEMENT_CONTENT_TRIGGER_KEY = "contentTrigger" - PHPublisherContentUnitTriggeredDismiss, PHPublisherNativeCloseButtonTriggeredDismiss, PHPublisherApplicationBackgroundTriggeredDismiss, PHPublisherNoContentTriggeredDismiss.</li>
</ul>
<h3><a class="anchor" id="placementRewards"></a>
Rewards</h3>
<p>Webviews can be configured to grant "rewards" to your users. You will receive the following notifications when these events happen:</p>
<ul>
<li>BFG_NOTIFICATION_PLACEMENT_CONTENT_UNLOCK_REWARD_OPENED - The reward UI has been opened. You may choose to grant reward to user.</li>
<li>BFG_NOTIFICATION_PLACEMENT_CONTENT_UNLOCK_REWARD_CLOSED - The reward UI has been closed. You may choose to grant reward to user.</li>
</ul>
<p>These notifications contain the following keys in the userInfo dictionary:</p>
<ul>
<li>BFG_PLACEMENT_REWARD_NAME_KEY = "rewardName" - A string value that should correspond to unlockables recognized by the game.</li>
<li>BFG_PLACEMENT_REWARD_QUANTITY_KEY = "rewardQuantity" - Quantity of the reward to unlock.</li>
<li>BFG_PLACEMENT_REWARD_RECEIPT_KEY = "rewardReceipts" - Unique receipt value, used for reward validation.</li>
</ul>
<h3><a class="anchor" id="placementIAPvirtualGoods"></a>
In-App Purchasing via Virtual Goods</h3>
<p>Webviews can be configured to initiate In-App Purchases in your games. You will receive the following notification when these events happen:</p>
<ul>
<li>BFG_NOTIFICATION_PLACEMENT_CONTENT_START_PURCHASE - A purchase has been requested. Your game should start the purchase.</li>
</ul>
<p>This notification contains the following keys in the userInfo dictionary:</p>
<ul>
<li>BFG_PLACEMENT_PURCHASE_PRODUCTID_KEY = "purchaseProductID"</li>
<li>BFG_PLACEMENT_PURCHASE_ITEM_KEY = "purchaseItem"</li>
<li>BFG_PLACEMENT_PURCHASE_QUANTITY_KEY = "purchaseQuantity"</li>
<li>BFG_PLACEMENT_PURCHASE_RECEIPT_KEY = "purchaseReceipt"</li>
</ul>
<h1><a class="anchor" id="rgs_integratePush"></a>
Integrating PlayHaven push notifications</h1>
 
    <div style=color:red><blockquote><b>Important:</b> Before implementing push notifications, contact your Big Fish Producer for support.</blockquote></div>
<h2><a class="anchor" id="rgs_integratePushDelegates"></a>
bfgPushNotificationManager and the bfgPushNotificationManager class</h2>
<p>The <a class="el" href="interfacebfg_push_notification_manager.html" title="Enables push notifications. ">bfgPushNotificationManager</a> class has the following methods. You <em>must</em> change your application delegate methods.</p>
<ul>
<li><a href="interfacebfg_push_notification_manager.html#a8e16cc90ff19ef21c47fd276738c59ec" class="el">[bfgPushNotificationManager registerForPlayHavenPushNotifications];</a> Prompts the user to register for push.</li>
<li><a href="interfacebfg_push_notification_manager.html#af5ac4c8580f24f2ee5fe88dbf0a9369e" class="el">[bfgPushNotificationManager handleRemoteNotificationWithLaunchOption:launchOptions];</a> Launches game if user selects/accepts push notification. If game is closed, the game will be launched. If the game is in memory, the game will open at the user's last play state. Once the game is launched/opened, a PlayHaven content unit may display (e.g., rewards, "Congrats You've won 100 gold coins"). In this example, the user selects the placement and receives the gold coins.</li>
<li><a href="interfacebfg_push_notification_manager.html#a4685a07581fd4b9f7d629f5ee37368a5" class="el">[bfgPushNotificationManager registerDeviceToken:deviceToken];</a> Registers the unique device token with the notification service. Success returns <b>didRegisterForRemoteNotificationsWithDeviceToken:</b> and failure returns <b>didFailToRegisterForRemoteNotificationsWithError:</b> </li>
<li><a href="interfacebfg_push_notification_manager.html#a0dae84ac3bcf34cc2bb9ca8acaff59f2" class="el">[bfgPushNotificationManager handlePush:userInfo];</a> Returns user information.</li>
<li><a href="interfacebfg_push_notification_manager.html#a3af5f945de361513ab8800a8f957f9d4" class="el">[bfgPushNotificationManager didFailToRegisterWithError:error];</a> Must be called from <b>application:application didFailToRegisterForRemoteNotificationsWithError:</b> to allow the SDK to know that registration has completed with failure.</li>
<li><a href="interfacebfg_push_notification_manager.html#ae47d6b25b02703a854bd33530b93f6eb" class="el">[bfgPushNotificationManager setIconBadgeNumber:newNumber];</a>: Sets the number of items available on the application badge icon on the springboard.</li>
<li><a href="interfacebfg_push_notification_manager.html#ad5e493a6a0fe24203d50d9f0c7f6b9aa" class="el">[bfgPushNotificationManager pushRegistrationInProgress];</a> The OS will trigger a resign notification when the Push Registration dialog appears. If you want to be able to differentiate this from other resigns, use this API.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>If you are integrating push notifications, you <em>must</em> call <b>registerForPushNotification</b> to initialize Apple's push notification. You can customize the timing of when this is called by delaying the call to this method. Coordinate with your Big Fish Producer for the best user experience.</dd></dl>
<div class="image">
<img src="pushNotification.png" alt="pushNotification.png"/>
<div class="caption">
Push Notification Dialog</div></div>
<p> The following code examples illustrate how to use the delegate methods.</p>
<p><b>handleRemoteNotificationWithLaunchOption:</b></p>
<div class="fragment"><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Register for the notifications</span></div>
<div class="line">    [[NSNotificationCenter defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(handleBrandingComplete:) name:BFGBRANDING_NOTIFICATION_COMPLETED <span class="keywordtype">object</span>:nil];</div>
<div class="line">    [[NSNotificationCenter defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(handleMainMenu:) name:<a class="code" href="bfg_manager_8h.html#ab1124a3783ef12de91333c8f44d9522f" title="Sent after GDN main menu button is selected. ">BFGPROMODASHBOARD_NOTIFICATION_MAINMENU</a> <span class="keywordtype">object</span>:nil];</div>
<div class="line">    [[NSNotificationCenter defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(handleColdStart:) name:<a class="code" href="bfg_manager_8h.html#aa4973762069524d7175329bfa38b9fd1" title="Sent after GDN play button is selected. ">BFGPROMODASHBOARD_NOTIFICATION_COLDSTART</a> <span class="keywordtype">object</span>:nil];</div>
<div class="line">    [[NSNotificationCenter defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(handleWarmStart:) name:<a class="code" href="bfg_manager_8h.html#a8f2f3fb016f22326b7d5806c6b239730" title="Sent after GDN resume button is selected. ">BFGPROMODASHBOARD_NOTIFICATION_WARMSTART</a> <span class="keywordtype">object</span>:nil];</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Do your own thing</span></div>
<div class="line"></div>
<div class="line">    [<span class="keyword">self</span>.window setRootViewController:<span class="keyword">self</span>.navigationController];</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// *************************************************************************************************************</span></div>
<div class="line">    <span class="comment">// ***                                     IMPORTANT!                                                        ***</span></div>
<div class="line">    <span class="comment">// *** EVERY TIME YOU CHANGE THE VISIBLE VIEW CONTROLLER YOU MUST CALL [bfgManager setParentViewController:] ***</span></div>
<div class="line">    <span class="comment">// *************************************************************************************************************</span></div>
<div class="line">    [<a class="code" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> initializeWithViewController:mainMenuController]; <span class="comment">// Sets the parentViewController to the main menu</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// *************************************************************************************************************</span></div>
<div class="line">    <span class="comment">// ***                                     PLEASE NOTE                                                       ***</span></div>
<div class="line">    <span class="comment">// *** In this example we display Apple &quot;Register for push?&quot; dialog immediately after launch, talk to your   ***</span></div>
<div class="line">    <span class="comment">// *** producer for best practice around displaying this dialog.                                             ***</span></div>
<div class="line">    <span class="comment">// *************************************************************************************************************</span></div>
<div class="line">    [<a class="code" href="interfacebfg_push_notification_manager.html" title="Enables push notifications. ">bfgPushNotificationManager</a> handleRemoteNotificationWithLaunchOption:launchOptions];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// The root view controller&#39;s view should be visible *before* calling [bfgManager initializeWithViewController:]</span></div>
<div class="line">    [<span class="keyword">self</span>.window makeKeyAndVisible];    </div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> YES;</div>
<div class="line">}</div>
</div><!-- fragment --><p> <br/>
 <b>didReceiveRemoteNotification and didRegisterForRemoteNotificationsWithDeviceToken:</b></p>
<div class="fragment"><div class="line">-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation</div>
<div class="line">{</div>
<div class="line">    NSLog(<span class="stringliteral">@&quot;This app was launched with this URL: %@&quot;</span>, url.absoluteString);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Check for SDK supported URL scheme support</span></div>
<div class="line">    <span class="keywordflow">if</span> (![<a class="code" href="interfacebfg_manager.html" title="Initialize the Big Fish Game Components. ">bfgManager</a> launchSDKByURLScheme:url.absoluteString])</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Do you own thing</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> YES;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo</div>
<div class="line">{</div>
<div class="line">                [<a class="code" href="interfacebfg_push_notification_manager.html" title="Enables push notifications. ">bfgPushNotificationManager</a> handlePush:userInfo];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken</div>
<div class="line">{</div>
<div class="line">                [<a class="code" href="interfacebfg_push_notification_manager.html" title="Enables push notifications. ">bfgPushNotificationManager</a> registerDeviceToken:deviceToken];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error</div>
<div class="line">{</div>
<div class="line">                [<a class="code" href="interfacebfg_push_notification_manager.html" title="Enables push notifications. ">bfgPushNotificationManager</a> didFailToRegisterWithError:error];</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="rgs_testPushNotifications"></a>
Testing push notifications</h2>
<h3><a class="anchor" id="rgs_enablePush"></a>
Enabling push notifications</h3>
<p>In the provisioning portal of the iOS Dev Center, you must enable the push notification service for your App ID by following the steps given in the "Creating the SSL Certificate and Keys" section from Apple's <a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ProvisioningDevelopment.html" target="_blank">Local and Push Notification Programming Guide.</a></p>
<p>You will need to have registered your App ID to proceed with further instructions. When you finish those steps, the push notification service will be enabled in your iOS App ID settings as illustrated below.</p>
<div class="image">
<img src="ApplePushNotifications.png" alt="ApplePushNotifications.png"/>
</div>
<h3><a class="anchor" id="rgs_pushInstallProfile"></a>
Installing the provisioning profile</h3>
<p>The provisioning profile is a collection of assets that associates developers of an application and their devices with an authorized development team and enables those devices to be used for testing.</p>
<p>The profile contains certificates, device identifiers, the application’s bundle ID, and all entitlements, including <code>aps-environment</code>. All team members must install the provisioning profile on the devices on which they will run and test application code.</p>
<p>To download and install the provisioning profile, complete the following steps:</p>
<ol type="1">
<li>Open the Provisioning Portal in the iOS Dev Center.</li>
<li>Download the provisioning profile associated with the application. From the download location, drag the profile file (extension: mobileprovision) on to the Xcode or iTunes application icons.<ul>
<li>Alternatively, you can move the profile file to <code> ~/Library/MobileDevice/Provisioning Profiles </code>. If it does not exist, create the directory.</li>
</ul>
</li>
<li>Open the Xcode Organizer window. In the <b>Provisioning Profiles</b> section, install the profile on your device.</li>
</ol>
<h1><a class="anchor" id="iapSupport"></a>
In-App Purchase Support - bfgPurchase</h1>
<p><a class="el" href="interfacebfg_purchase.html" title="Manages Apple&#39;s In-App Purchases. ">bfgPurchase</a> manages the actual purchases. You <em>must</em> use <a class="el" href="interfacebfg_purchase.html" title="Manages Apple&#39;s In-App Purchases. ">bfgPurchase</a> to implement In-App Purchase in your game.</p>
<p>The SDK provides two APIs for developers to use for In-App Purchase:</p>
<p>(1) <b>+ (void)startPurchase:(NSString *)productId details1:(NSString *)details1 details2:(NSString *)details2 details3:(NSString *)details3 additionalDetails:(NSDictionary *)additionalDetails;</b></p>
<p>This method returns <em>details1</em>, <em>details2</em>, and <em>details3</em> as <em>st1</em>, <em>st2</em>, and <em>st3</em>, where:</p>
<ul>
<li>st1 = "transaction"</li>
<li>st2 = &lt; item bought &gt;</li>
<li>st3 = &lt; price tier &gt;</li>
</ul>
<p>(2) <b> + (void)startPurchase:(NSString*)productId;</b></p>
<p>This method returns empty values for details1, details2, and details3.</p>
<p>For more information, see <a class="el" href="f2p_purchase.html">Making Free-to-Play In-App Purchases</a> or <a class="el" href="freemium_purchase.html">Making Freemium In-App Purchases</a>, depending on your type of game, and the Big Fish SDK's UI Kit Example.</p>
<h1><a class="anchor" id="utilitiesSupportClasses"></a>
Utilities and Support Classes</h1>
<p>Several other classes support the major components or facilitate development. The following libraries are unique to Big Fish.</p>
<h2><a class="anchor" id="bfgProfileManager"></a>
bfgProfileManager</h2>
<p>Allows for easy storage of user profiles. The Profile Manager uses an MD5File class to read and write files twice and perform a checksum function to detect errors.</p>
<h2><a class="anchor" id="bfgSettings"></a>
bfgSettings</h2>
<p>Developers can use this class to store settings used in their own games.</p>
<h2><a class="anchor" id="bfgStrings"></a>
bfgStrings</h2>
<p>A localizable string class that enables a single file to store strings for all the languages supported by the game.</p>
<h1><a class="anchor" id="AppManStrategyGuides"></a>
The Big Fish Game App, Strategy Guides, and bfgAppManager</h1>
<p>Today, the iOS App Store has over 1.2 million apps with a thousand new apps published every day. The Big Fish Games mobile app will prevent content overload distractions by only marketing games published through Big Fish, which will ultimately drive significant revenue for each game.</p>
<p>To increase visibility of the games in this network, players will find and use strategy guides for Collector’s Edition games within the Big Fish Games App <a href="https://itunes.apple.com/us/app/big-fish-games-free-game-game/id431387115?mt=8">(https://itunes.apple.com/us/app/big-fish-games-free-game-game/id431387115?mt=8)</a> instead of within the game itself.</p>
<p>The user is presented several opportunities to install the Big Fish Game App, as once the application is installed, it will enhance game play. The Big Fish Game App needs to be installed only once. If it has already been installed, your game will receive a BFG_NOTIFICATION_APP_DETECTED notification.</p>
<p>If your Big Fish Producer contacts you to implement Big Fish Games App strategy guide access in your game, you will use the following APIs of the <a class="el" href="interfacebfg_app_manager.html" title="Installing and launching other apps. ">bfgAppManager</a> class:</p>
<ul>
<li>isBigFishGamesAppInstalled</li>
<li>launchStoreWithApp</li>
<li>launchBigFishGamesAppStrategyGuideWithWrappingID</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>You will also need to define a custom referral URL scheme, as described in <a class="el" href="reference_class.html#AMSGreferralUrl">Strategy guides and customer referral URLs</a>.</dd></dl>
<h2><a class="anchor" id="AMSGInstalled"></a>
isBigFishGamesAppInstalled</h2>
<p>Calling isBigFishGamesAppInstalled determines if the Big Fish Game App has already been installed. It returns YES if the app is detected and NO if the app is not installed. If the method returns YES, you will receive a BFG_NOTIFICATION_APP_DETECTED notification.</p>
<h2><a class="anchor" id="AMSGlaunchStoreWithApp"></a>
launchStoreWithApp</h2>
<p>If the Big Fish Game App has not yet been installed, calling this method presents the app in the App Store for the user to install.</p>
<ul>
<li>For iOS 6 and later, a modal, overlay view of the App Store is presented with the product information for the given app ID. App Store event notifications occur when the App Store overlay has been presented or dismissed.</li>
<li>For iOS 5, the user is switched out to the App Store. App Store event notifications occur when the switch to the App Store occurs, or when it is dismissed.</li>
</ul>
<p>The launchStoreWithApp method has one parameter, appID, which should be replaced with the app ID for the Big Fish Games App: 431387115.</p>
<p>Once the Big Fish Games App is installed, you will receive a BFG_NOTIFICATION_APP_DETECTED notification.</p>
<h2><a class="anchor" id="AMSGlaunchWrappingID"></a>
launchBigFishGamesAppStrategyGuideWithWrappingID</h2>
<p>Once the Big Fish Games App is installed, the user will be able to access contextual information from the game strategy guide. Calling the <a href="interfacebfg_app_manager.html#a75c3a176922d41df2546fe53f00c40e3" class="el">launchBigFishGamesAppStrategyGuideWithWrappingID</a> method will provide this access. This method has three parameters:</p>
<ul>
<li>wrappingID: The wrapping ID for your game is provided by your Big Fish Producer.</li>
<li>chapterIndex: The index of the strategy guide chapter. This corresponds to a specific chapter.</li>
<li>pageIndex: The index of strategy guide page in chapter. This corresponds to a specific page in the chapter.</li>
</ul>
<p>Return values are YES if the app is launched, and NO if the app is not installed.</p>
<h2><a class="anchor" id="strategyGuide_bfgManager"></a>
Calling a strategy guide with bfgManager</h2>
<p>The following code example describes how to call <a href="interfacebfg_app_manager.html#a75c3a176922d41df2546fe53f00c40e3" class="el">launchBigFishGamesAppStrategyGuideWithWrappingID</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// The wrappingId for the game &quot;Dark Parables: Rise of the Snow Queen Collector&#39;s Edition&quot; is F6894T7L1</span></div>
<div class="line">NSString *wrappingId = <span class="stringliteral">@&quot;F6894T7L1&quot;</span>;</div>
<div class="line"></div>
<div class="line">[<a class="code" href="interfacebfg_app_manager.html" title="Installing and launching other apps. ">bfgAppManager</a> launchBigFishGamesAppStrategyGuideWithWrappingID:wrappingId];</div>
</div><!-- fragment --><h2><a class="anchor" id="AMSGreferralUrl"></a>
Strategy guides and customer referral URLs</h2>
<p>If a custom URL scheme has not been defined for each SKU, then the game will not be able to launch a specific chapter and page of the Strategy Guide in the Big Fish Games app. In Xcode, add the following key to info.plist files for all targets:</p>
<div class="fragment"><div class="line">&lt;key&gt;CFBundleURLTypes&lt;/key&gt;</div>
<div class="line">&lt;array&gt;</div>
<div class="line">&lt;dict&gt;</div>
<div class="line">&lt;key&gt;CFBundleURLName&lt;/key&gt;</div>
<div class="line">&lt;<span class="keywordtype">string</span>&gt;Bundle_ID&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;</div>
<div class="line">&lt;array&gt;</div>
<div class="line">&lt;<span class="keywordtype">string</span>&gt;Bundle_ID&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">&lt;/array&gt;</div>
<div class="line">&lt;/dict&gt;</div>
<div class="line">&lt;/array&gt;</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Bundle_ID is the bundle identifier for your game, for example com.bigfishgames.testapp.</dd></dl>
<p>When [<a href="interfacebfg_app_manager.html#af6d85ad9400d3e7c142bd83ede2879da" class="el">bfgAppManager launchStoreWithBigFishGamesApp</a>] is called, a referral URL is opened that typically has several redirects before getting an App Store link and extracting the app ID. Since this process depends on external servers and network conditions, it is important to handle the failure case and inform the player to try again later. The URL referral failure notification occurs when the attempt to follow the Big Fish Games referral URL was not able to get the app ID.</p>
<h2><a class="anchor" id="bfgAppStraGuidesReporting"></a>
Strategy Guide Reporting</h2>
<p>To ensure reporting player access of the strategy guides:</p>
<ul>
<li>When the strategy guide overlay is shown, call [<a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logPurchasePayWallShown:@"guide"]; <br/>
</li>
<li>Whenever the player uses the "guide" button without the Big Fish Games App installed, call [<a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logPurchasePayWallShown:@"guide"]; <br/>
<ul>
<li>Logs session data using “guide” as the paywall ID.</li>
<li>PlayHaven placement: BFG_PLACEMENT_END_PAYWALL_OPENED.</li>
</ul>
</li>
<li>When the strategy guide overlay is closed, call [<a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logPurchasePayWallClosed:@"guide"]; <br/>
</li>
<li>If the player closes the overlay without downloading the Big Fish Games app, call [<a class="el" href="interfacebfg_game_reporting.html" title="Required game logging APIs. ">bfgGameReporting</a> logPurchasePayWallClosed:@"guide"]; <br/>
<ul>
<li>PlayHaven placement: BFG_PLACEMENT_END_PAYWALL_CLOSED.</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The strategy guide overlay replaces the paywall that would normally be shown if the guide was accessed prior to purchase, since this feature is no longer a part of the CE unlock. </dd></dl>
</div></div><!-- contents -->

<hr class="footer"/><address class="footer"><small>
</body>
</html>
